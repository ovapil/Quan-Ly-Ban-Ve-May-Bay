<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UITicket - Dashboard</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Asap:wght@400;600;700;800&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="css/common.css" />
  <link rel="stylesheet" href="css/dashboard.css" />
</head>

<body class="app-mode">
  <div id="toast">Th√¥ng b√°o</div>

  <header class="app-header">
    <div class="bar">
      <!-- BRAND -->
      <div class="brand">
        <img class="brand-logo-img" src="assets/images/logo.png" alt="UITicket Logo" />
        <div class="name">
          <div class="title">UITicket</div>
          <div class="slogan">Buy&Fly. Catch your sky!</div>
        </div>
      </div>

      <!-- NAV -->
      <nav class="nav-tabs" aria-label="Main Navigation">
        <button class="tab active" onclick="Dashboard.tabClick('home')">Trang ch·ªß</button>
        <button class="tab" onclick="Dashboard.tabClick('account')">T√†i kho·∫£n</button>
        <button class="tab" onclick="Dashboard.tabClick('settings')">C√†i ƒë·∫∑t</button>
      </nav>

      <!-- ACTIONS -->
      <div class="actions">
        <button class="icon-btn" onclick="Dashboard.openNotifications()" aria-label="Notifications">
          <i class="fa-regular fa-bell"></i>
          <span class="badge" id="notifBadge">1</span>
        </button>
        <button class="icon-btn" onclick="Dashboard.openUserManagement()" aria-label="User Management" id="userMgmtBtn">
          <i class="fa-solid fa-users-gear"></i>
        </button>
        <button class="icon-btn dropdown-btn" aria-label="Menu" onclick="UI.toggleMenu()">
          <i class="fa-solid fa-bars"></i>
          <div class="dropdown-menu hidden" id="dropdownMenu">
            <a href="#" onclick="Dashboard.tileClick('profile'); return false;">üë§ H·ªì s∆°</a>
            <a href="#" onclick="Dashboard.tileClick('settings'); return false;">‚öôÔ∏è C√†i ƒë·∫∑t</a>
            <hr style="margin: 8px 0; border: none; border-top: 1px solid #e2e8f0;">
            <a href="#" onclick="Dashboard.logout(); return false;" style="color: #ef4444;">üö™ ƒêƒÉng xu·∫•t</a>
          </div>
        </button>
      </div>
    </div>
  </header>

  <main class="page">
    <!-- ‚úÖ TH√äM: id="dashboardGrid" -->
    <section class="grid" id="dashboardGrid">

      <!-- USER CARD -->
      <div class="tile user" tabindex="0" role="button" onclick="Dashboard.tileClick('profile')">
        <div class="user-wrap">
          <div class="avatar">
            <img id="avatarImg" alt="Avatar" />
            <i class="fa-solid fa-user" id="avatarFallback"></i>
          </div>

          <div class="user-meta">
            <div class="user-name" id="homeName">Nguy·ªÖn VƒÉn A</div>

            <div class="chip" id="roleChip">
              <i class="fa-solid fa-user-tie"></i>
              <span id="homeRole">Staff</span>
            </div>

            <!-- ‚úÖ TH√äM: Mini actions -->
            <div class="mini-actions">
              <button class="mini-btn" onclick="event.stopPropagation(); Dashboard.tileClick('profile')">H·ªì s∆°</button>
              <button class="mini-btn danger" onclick="event.stopPropagation(); Dashboard.logout()">ƒêƒÉng xu·∫•t</button>
            </div>
          </div>
        </div>
      </div>

      <!-- TRA C·ª®U -->
      <div class="tile lookup" tabindex="0" role="button" onclick="Dashboard.tileClick('lookup')">
        <div class="row">
          <div class="tile-illus">
            <img src="assets/images/illus-lookup.png" alt="Illustration lookup" />
          </div>

          <div class="col" style="text-align:right;">
            <div class="kicker">Tra c·ª©u</div>
            <div class="big">CHUY·∫æN BAY</div>
          </div>
        </div>
      </div>

      <!-- H√ÄNH KH√ÅCH -->
      <div class="tile customers" tabindex="0" role="button" onclick="Dashboard.tileClick('customers')">
        <div class="row">
          <div class="tile-illus">
            <img src="assets/images/illus-customers.png" alt="Illustration customers" />
          </div>

          <div class="col">
            <div class="kicker customers-kicker">Qu·∫£n l√Ω th√¥ng tin</div>
            <div class="big mid customers-main">H√ÄNH KH√ÅCH</div>
          </div>
        </div>
      </div>

      <!-- ƒê·∫∂T V√â (span 2 rows) -->
      <div class="tile booking" tabindex="0" role="button" onclick="Dashboard.tileClick('booking')">
        <div class="booking-text">
          <div class="booking-kicker">Qu·∫£n l√Ω</div>
          <div class="booking-main">ƒê·∫∂T V√â</div>
        </div>

        <div class="tile-illus">
          <img src="assets/images/illus-seat.png" alt="Illustration seat" />
        </div>
      </div>

      <!-- NH·∫¨N L·ªäCH -->
      <div class="tile schedule" tabindex="0" role="button" onclick="Dashboard.tileClick('schedule')">
        <div class="row">
          <div class="col">
            <div class="kicker">Nh·∫≠n l·ªãch</div>
            <div class="big mid">CHUY·∫æN BAY</div>
          </div>

          <div class="tile-illus">
            <img src="assets/images/illus-calendar.png" alt="Illustration calendar" />
          </div>
        </div>
      </div>

      <!-- B√ÅO C√ÅO -->
      <div class="tile report" tabindex="0" role="button" onclick="Dashboard.tileClick('report')">
        <div class="row">
          <div class="tile-illus">
            <img src="assets/images/illus-report.png" alt="Illustration report" />
          </div>

          <div class="col report-text">
            <div class="report-small">L·∫≠p b√°o c√°o</div>
            <div class="report-big">TH·ªêNG K√ä</div>
          </div>
        </div>
      </div>

      <!-- B√ÅN V√â -->
      <div class="tile sell" tabindex="0" role="button" onclick="Dashboard.tileClick('sell')">
        <div class="row">
          <div class="tile-illus">
            <img src="assets/images/illus-sell.png" alt="Illustration sell" />
          </div>

          <div class="col" style="text-align:right;">
            <div class="big">B√ÅN V√â</div>
          </div>
        </div>
      </div>

      <!-- C·∫¨P NH·∫¨T TH√îNG TIN -->
      <div class="tile info" id="infoTile" tabindex="0" role="button" onclick="Dashboard.tileClick('info')">
        <div class="row">
          <div class="tile-illus">
            <img src="assets/images/illus-info.png" alt="Illustration info" />
          </div>

          <div class="col" style="text-align:right;">
            <div class="report-small">C·∫≠p nh·∫≠t</div>
            <div class="report-big">TH√îNG TIN</div>          
          </div>
        </div>
      </div>

    </section>
  </main>

  <!-- ‚úÖ TH√äM: Staff Management Modal -->
  <div id="staffModal" class="modal hidden">
    <div class="modal-card staff-card">
      <div class="modal-head">
        <div class="staff-head">
          <h3>Qu·∫£n l√Ω nh√¢n vi√™n</h3>
          <div class="staff-sub" id="staffSummary">‚Äî</div>
        </div>
        <button class="modal-close" onclick="Dashboard.closeStaffModal()">√ó</button>
      </div>

      <div class="modal-body">
        <div class="staff-toolbar">
          <input id="staffSearch" class="staff-search" placeholder="T√¨m theo t√™n / username / email..." />
          <select id="staffFilter" class="staff-filter">
            <option value="all">T·∫•t c·∫£</option>
            <option value="online">Online</option>
            <option value="offline">Offline</option>
            <option value="active">ƒêang ho·∫°t ƒë·ªông</option>
            <option value="locked">B·ªã kho√°</option>
          </select>
        </div>

        <button class="staff-create-btn" onclick="Dashboard.toggleCreateStaffForm()">
          + T·∫°o nh√¢n vi√™n
        </button>

        <div id="staffCreateForm" class="staff-create hidden">
          <div class="staff-create-grid">
            <input id="newStaffUsername" class="staff-search" placeholder="Username (vd: staff02)" />
            <input id="newStaffFullname" class="staff-search" placeholder="H·ªç t√™n (tu·ª≥ ch·ªçn)" />
            <input id="newStaffEmail" class="staff-search" placeholder="Email nh√¢n vi√™n" />

            <select id="newStaffRole" class="staff-filter">
              <option value="Staff">Staff</option>
              <option value="Agent">Agent</option>
            </select>

            <input id="newStaffPassword" class="staff-search" placeholder="M·∫≠t kh·∫©u (ƒë·ªÉ tr·ªëng = t·ª± t·∫°o)" />
          </div>

          <div class="staff-create-actions">
            <button class="action-btn" onclick="Dashboard.createStaff()">T·∫°o & G·ª≠i mail</button>
            <button class="action-btn" onclick="Dashboard.toggleCreateStaffForm(false)">Hu·ª∑</button>
          </div>

          <div class="staff-muted">M·∫≠t kh·∫©u ƒë·ªÉ tr·ªëng ‚Üí h·ªá th·ªëng t·ª± t·∫°o m·∫≠t kh·∫©u t·∫°m v√† g·ª≠i mail.</div>
        </div>

        <div id="staffList"></div>
      </div>
    </div>
  </div>

  <!-- ‚úÖ TH√äM: Reset Requests Modal -->
  <div id="resetModal" class="modal hidden">
    <div class="modal-card">
      <div class="modal-head">
        <h3>Y√™u c·∫ßu reset m·∫≠t kh·∫©u</h3>
        <button class="modal-close" onclick="Dashboard.closeResetModal()">√ó</button>
      </div>

      <div id="resetList" class="modal-body"></div>
    </div>
  </div>

  <!-- ‚úÖ TH√äM: System Info Modal -->
  <div id="infoModal" class="modal hidden">
    <div class="modal-card info-card">
      <div class="modal-head">
        <h3>C·∫≠p nh·∫≠t th√¥ng tin h·ªá th·ªëng</h3>
        <button class="modal-close" onclick="Dashboard.closeInfoModal()">√ó</button>
      </div>

      <div class="modal-body info-body">
        <div class="info-tabs">
          <button class="info-tab active" data-tab="airport" onclick="Dashboard.switchInfoTab('airport')">
            <i class="fa-solid fa-plane"></i> S√¢n bay
          </button>
          <button class="info-tab" data-tab="class" onclick="Dashboard.switchInfoTab('class')">
            <i class="fa-solid fa-layer-group"></i> H·∫°ng v√©
          </button>
          <button class="info-tab" data-tab="system" onclick="Dashboard.switchInfoTab('system')">
            <i class="fa-solid fa-sliders"></i> Tham s·ªë
          </button>
        </div>

        <!-- S√ÇN BAY TAB -->
        <div class="info-tab-content active" id="airportTab">
          <h4>Qu·∫£n l√Ω s√¢n bay</h4>
          <div class="info-form">
            <input type="text" id="airportCode" placeholder="M√£ s√¢n bay (vd: HAN)" />
            <input type="text" id="airportName" placeholder="T√™n s√¢n bay (vd: N·ªôi B√†i)" />
            <input type="text" id="airportCity" placeholder="Th√†nh ph·ªë" />
            <input type="text" id="airportCountry" placeholder="Qu·ªëc gia" />
            <button class="info-btn" onclick="Dashboard.addAirport()">+ Th√™m s√¢n bay</button>
          </div>
          <div id="airportList" class="info-list"></div>
        </div>

        <!-- H·∫†NG V√â TAB -->
        <div class="info-tab-content" id="classTab">
          <h4>Qu·∫£n l√Ω h·∫°ng v√©</h4>
          <div class="info-form">
            <input type="text" id="className" placeholder="M√£ h·∫°ng v√© (vd: ECO)" />
            <input type="text" id="classDisplayName" placeholder="T√™n h·∫°ng v√© (vd: Economy)" />
            <input type="number" id="classPriceRatio" placeholder="T·ª∑ l·ªá gi√° (vd: 1.0)" step="0.1" />
            <button class="info-btn" onclick="Dashboard.addClass()">+ Th√™m h·∫°ng v√©</button>
          </div>
          <div id="classList" class="info-list"></div>
        </div>

        <!-- THAM S·ªê H·ªÜ TH·ªêNG TAB -->
        <div class="info-tab-content" id="systemTab">
          <h4>Qu·∫£n l√Ω tham s·ªë h·ªá th·ªëng</h4>
          <div class="info-form">
            <input type="text" id="paramName" placeholder="T√™n tham s·ªë (vd: min_flight_duration)" />
            <input type="text" id="paramValue" placeholder="Gi√° tr·ªã" />
            <input type="text" id="paramDesc" placeholder="M√¥ t·∫£ (tu·ª≥ ch·ªçn)" />
            <button class="info-btn" onclick="Dashboard.addParameter()">+ Th√™m tham s·ªë</button>
          </div>
          <div id="parameterList" class="info-list"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="js/dashboard.js"></script>
</body>
</html>